import * as Renovate from "../../renovate.ts";

export const emptyRenovateLog: Renovate.JsonLog = {
  msg: "empty",
  time: "2022-12-12T13:41:43.397Z",
  v: 0,
  level: 20
};

export const dependencyExtractionComplete = {
  name: "renovate",
  hostname: "hoge",
  pid: 94100,
  level: 30,
  logContext: "jGdlAUOfcK6bPvG7TDs8l",
  repository: "korosuke613/renovate-playground",
  baseBranch: "main",
  stats: {
    managers: {
      asdf: { fileCount: 1, depCount: 3 },
      gomod: { fileCount: 1, depCount: 2 },
      regex: { fileCount: 1, depCount: 1 },
    },
    total: { fileCount: 3, depCount: 6 },
  },
  msg: "Dependency extraction complete",
  time: "2022-12-10T13:41:43.397Z",
  v: 0,
};

export const packageFilesWithUpdates = {
  name: "renovate",
  hostname: "hoge",
  pid: 94100,
  level: 20,
  logContext: "jGdlAUOfcK6bPvG7TDs8l",
  repository: "korosuke613/renovate-playground",
  baseBranch: "main",
  config: {
    asdf: [
      {
        packageFile: ".tool-versions",
        deps: [
          {
            depName: "goreleaser",
            skipReason: "unsupported-datasource",
            depIndex: 0,
            updates: [],
          },
          {
            currentValue: "1.18.1",
            depName: "golang",
            datasource: "github-tags",
            packageName: "golang/go",
            versioning: "semver",
            extractVersion: "^go(?<version>\\S+)",
            depIndex: 1,
            updates: [
              {
                bucket: "non-major",
                newVersion: "1.19.4",
                newValue: "1.19.4",
                releaseTimestamp: "2022-12-06T19:30:53.000Z",
                newMajor: 1,
                newMinor: 19,
                updateType: "minor",
                branchName: "renovate/golang-version",
              },
            ],
            warnings: [],
            sourceUrl: "https://github.com/golang/go",
            currentVersion: "1.18.1",
            isSingleVersion: true,
            fixedVersion: "1.18.1",
          },
          {
            depName: "golangci-lint",
            skipReason: "unsupported-datasource",
            depIndex: 2,
            updates: [],
          },
        ],
      },
    ],
    gomod: [
      {
        packageFile: "go.mod",
        deps: [
          {
            managerData: { lineNumber: 2 },
            depName: "go",
            depType: "golang",
            currentValue: "1.18",
            datasource: "golang-version",
            versioning: "npm",
            rangeStrategy: "replace",
            depIndex: 0,
            updates: [
              {
                bucket: "non-major",
                newVersion: "1.19.4",
                newValue: "1.19",
                releaseTimestamp: "2022-12-06T00:00:00.000Z",
                newMajor: 1,
                newMinor: 19,
                updateType: "minor",
                isRange: true,
                branchName: "renovate/golang-version",
              },
            ],
            warnings: [],
            sourceUrl: "https://github.com/golang/go",
            homepage: "https://go.dev/",
            currentVersion: "1.18.9",
            isSingleVersion: false,
          },
          {
            managerData: { lineNumber: 4 },
            depName: "go.uber.org/zap",
            depType: "require",
            currentValue: "v1.20.0",
            datasource: "go",
            depIndex: 1,
            updates: [
              {
                bucket: "non-major",
                newVersion: "v1.24.0",
                newValue: "v1.24.0",
                releaseTimestamp: "2022-11-30T18:30:33.000Z",
                newMajor: 1,
                newMinor: 24,
                updateType: "minor",
                branchName: "renovate/gomod",
              },
            ],
            warnings: [],
            versioning: "semver",
            sourceUrl: "https://github.com/uber-go/zap",
            currentVersion: "v1.20.0",
            isSingleVersion: true,
            fixedVersion: "v1.20.0",
          },
        ],
      },
    ],
    regex: [
      {
        packageFile: ".tool-versions",
        deps: [
          {
            depName: "golangci/golangci-lint",
            currentValue: "1.49.0",
            datasource: "github-releases",
            extractVersion: "^v(?<version>.*)$",
            replaceString: "golangci-lint 1.49.0",
            depIndex: 0,
            updates: [
              {
                bucket: "non-major",
                newVersion: "1.50.1",
                newValue: "1.50.1",
                releaseTimestamp: "2022-10-22T11:11:45.000Z",
                newMajor: 1,
                newMinor: 50,
                updateType: "minor",
                branchName: "renovate/golangci-lint",
              },
            ],
            warnings: [],
            versioning: "semver",
            sourceUrl: "https://github.com/golangci/golangci-lint",
            currentVersion: "1.49.0",
            isSingleVersion: true,
            fixedVersion: "1.49.0",
          },
        ],
        matchStrings: ["golangci-lint (?<currentValue>\\d+\\.\\d+\\.\\d+)"],
        depNameTemplate: "golangci/golangci-lint",
        datasourceTemplate: "github-releases",
        extractVersionTemplate: "^v(?<version>.*)$",
      },
    ],
  },
  msg: "packageFiles with updates",
  time: "2022-12-10T13:41:46.615Z",
  v: 0,
};

export const prettyPackageFilesWithUpdates = {
  baseBranch: "main",
  updates: {
    asdf: {
      ".tool-versions": {
        golang: {
          currentValue: "1.18.1",
          currentVersion: "1.18.1",
          datasource: "github-tags",
          depIndex: 1,
          depName: "golang",
          extractVersion: "^go(?<version>\\S+)",
          fixedVersion: "1.18.1",
          isSingleVersion: true,
          packageName: "golang/go",
          sourceUrl: "https://github.com/golang/go",
          updates: [
            {
              branchName: "renovate/golang-version",
              bucket: "non-major",
              newMajor: 1,
              newMinor: 19,
              newValue: "1.19.4",
              newVersion: "1.19.4",
              releaseTimestamp: "2022-12-06T19:30:53.000Z",
              updateType: "minor",
            },
          ],
          versioning: "semver",
          warnings: [],
        },
        "golangci-lint": {
          depIndex: 2,
          depName: "golangci-lint",
          skipReason: "unsupported-datasource",
          updates: [],
        },
        goreleaser: {
          depIndex: 0,
          depName: "goreleaser",
          skipReason: "unsupported-datasource",
          updates: [],
        },
      },
    },
    gomod: {
      "go.mod": {
        go: {
          currentValue: "1.18",
          currentVersion: "1.18.9",
          datasource: "golang-version",
          depIndex: 0,
          depName: "go",
          depType: "golang",
          homepage: "https://go.dev/",
          isSingleVersion: false,
          managerData: {
            lineNumber: 2,
          },
          rangeStrategy: "replace",
          sourceUrl: "https://github.com/golang/go",
          updates: [
            {
              branchName: "renovate/golang-version",
              bucket: "non-major",
              isRange: true,
              newMajor: 1,
              newMinor: 19,
              newValue: "1.19",
              newVersion: "1.19.4",
              releaseTimestamp: "2022-12-06T00:00:00.000Z",
              updateType: "minor",
            },
          ],
          versioning: "npm",
          warnings: [],
        },
        "go.uber.org/zap": {
          currentValue: "v1.20.0",
          currentVersion: "v1.20.0",
          datasource: "go",
          depIndex: 1,
          depName: "go.uber.org/zap",
          depType: "require",
          fixedVersion: "v1.20.0",
          isSingleVersion: true,
          managerData: {
            lineNumber: 4,
          },
          sourceUrl: "https://github.com/uber-go/zap",
          updates: [
            {
              branchName: "renovate/gomod",
              bucket: "non-major",
              newMajor: 1,
              newMinor: 24,
              newValue: "v1.24.0",
              newVersion: "v1.24.0",
              releaseTimestamp: "2022-11-30T18:30:33.000Z",
              updateType: "minor",
            },
          ],
          versioning: "semver",
          warnings: [],
        },
      },
    },
    regex: {
      ".tool-versions": {
        "golangci/golangci-lint": {
          currentValue: "1.49.0",
          currentVersion: "1.49.0",
          datasource: "github-releases",
          depIndex: 0,
          depName: "golangci/golangci-lint",
          extractVersion: "^v(?<version>.*)$",
          fixedVersion: "1.49.0",
          isSingleVersion: true,
          replaceString: "golangci-lint 1.49.0",
          sourceUrl: "https://github.com/golangci/golangci-lint",
          updates: [
            {
              branchName: "renovate/golangci-lint",
              bucket: "non-major",
              newMajor: 1,
              newMinor: 50,
              newValue: "1.50.1",
              newVersion: "1.50.1",
              releaseTimestamp: "2022-10-22T11:11:45.000Z",
              updateType: "minor",
            },
          ],
          versioning: "semver",
          warnings: [],
        },
      },
    },
  },
};
